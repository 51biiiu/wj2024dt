<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>闲闲二手交易反馈</title>
    <!--Font Awesome 图标-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdn.staticfile.net/twitter-bootstrap/5.1.1/css/bootstrap.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdn.staticfile.net/twitter-bootstrap/5.1.1/js/bootstrap.bundle.min.js"></script>

    <link rel="stylesheet" href="../css/app.css">
    <style>
        /* 顶部导航高度适配 */
        .csttop {
            height: 80px; /* 固定导航高度，避免内容被遮挡 */
        }

        /* 反馈主体区域样式 */
        .bg-feedback {
            background-color: #F8F9FB;
            padding: 30px 20px;
            margin: 20px auto;
            width: 100%;
            max-width: 800px; /* 限制最大宽度，提升阅读体验 */
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        /* 标题样式 */
        .bg-feedback h2 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
            font-weight: 600;
        }

        /* 选项组间距 */
        .feedback-group {
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee; /* 分隔不同模块 */
        }

        /* 选项组标题 */
        .feedback-group p {
            font-size: 16px;
            color: #444;
            margin-bottom: 15px;
            font-weight: 500;
        }

        /* 单选框间距 */
        .form-check {
            margin-bottom: 10px;
        }

        /* 文件上传区域样式 */
        .upload-area {
            border: 2px dashed #ddd;
            border-radius: 4px;
            padding: 30px;
            text-align: center;
            cursor: pointer;
            margin-bottom: 20px;
            transition: border-color 0.3s;
        }

        .upload-area:hover {
            border-color: #0d6efd; /*  hover 时变蓝，提示可点击 */
        }

        .upload-area i {
            font-size: 30px;
            color: #888;
            margin-bottom: 10px;
        }

        .upload-area p {
            color: #666;
            margin: 0;
        }

        /* 隐藏原生文件输入框 */
        #screenshot {
            display: none;
        }

        /* 提交按钮样式 */
        .submit-btn {
            text-align: center;
            margin-top: 20px;
        }

        .submit-btn button {
            padding: 8px 30px;
            font-size: 16px;
        }
    </style>
</head>
<body>
    <!-- 顶部导航 -->
    <div style="background-color: #ffe60f" class="container-fluid csttop">
        <div class="d-flex w-100 h-100 justify-content-center align-items-center">
            <div class="cstlogo d-flex w-100 h-100 align-items-center">
                <img src="../img/logo.png" alt="闲闲logo" style="height: 40px;">
                <img src="../img/logo.png" alt="闲闲logo" style="height: 40px; margin-left: 10px;">
            </div>
            <div class="cstsearch fs-5 fw-medium">——反馈中心</div>
            <div class="ms-auto me-4"> <!-- 右对齐，可加返回按钮 -->
                <a href="./landing.html" class="text-dark me-3"><i class="fa fa-arrow-left"></i> 返回首页</a>
            </div>
        </div>
    </div>

    <!-- 反馈表单主体 -->
    <div class="bg-feedback">
        <h2>闲闲用户反馈中心</h2>
        <!-- 表单：onsubmit 调用验证函数，阻止默认提交 -->
        <form action="./individualcenter.html" id="feedbackForm" onsubmit="return submitFeedback()">
            <!-- 1. 反馈类型选项组 -->
            <div class="feedback-group">
                <p>1. 请选择反馈类型：</p>
                <div class="form-check">
                    <!-- 修复id，name改为feedbackType，与问题页区分 -->
                    <input type="radio" class="form-check-input" id="type1" name="feedbackType" value="suggestion" checked>
                    <label class="form-check-label" for="type1">我要提功能体验建议</label>
                </div>
                <div class="form-check">
                    <input type="radio" class="form-check-input" id="type2" name="feedbackType" value="bug">
                    <label class="form-check-label" for="type2">我要反馈故障</label>
                </div>
            </div>

            <!-- 2. 反馈内容输入 -->
            <div class="feedback-group">
                <p>2. 请详细描述你的反馈（必填）：</p>
                <div class="mb-3">
                    <textarea class="form-control" rows="5" id="comment" name="text" placeholder="例如：首页加载慢/希望增加收藏功能..." required></textarea>
                    <div class="form-text text-muted">请尽量详细描述，帮助我们更快解决问题</div>
                </div>
            </div>

            <!-- 3. 问题页面选项组 -->
            <div class="feedback-group">
                <p>3. 涉及的问题页面（必填）：</p>
                <div class="form-check">
                    <!-- name改为pageType，与反馈类型区分 -->
                    <input type="radio" class="form-check-input" id="page1" name="pageType" value="home" checked>
                    <label class="form-check-label" for="page1">首页</label>
                </div>
                <div class="form-check">
                    <input type="radio" class="form-check-input" id="page2" name="pageType" value="search">
                    <label class="form-check-label" for="page2">搜索</label>
                </div>
                <div class="form-check">
                    <input type="radio" class="form-check-input" id="page3" name="pageType" value="detail">
                    <label class="form-check-label" for="page3">商品详情</label>
                </div>
                <div class="form-check">
                    <input type="radio" class="form-check-input" id="page4" name="pageType" value="trade">
                    <label class="form-check-label" for="page4">交易</label>
                </div>
                <div class="form-check">
                    <input type="radio" class="form-check-input" id="page5" name="pageType" value="account">
                    <label class="form-check-label" for="page5">账号相关（个人中心）</label> <!-- 修复表述错误 -->
                </div>
                <div class="form-check">
                    <input type="radio" class="form-check-input" id="page6" name="pageType" value="other">
                    <label class="form-check-label" for="page6">其他</label>
                </div>
            </div>

            <!-- 4. 截图上传（新增功能） -->
            <div class="feedback-group">
                <p>4. 上传有效截图（选填，可加快问题处理）：</p>
                <!-- 自定义上传按钮 -->
                <label for="screenshot" class="upload-area">
                    <i class="fa fa-cloud-upload"></i>
                    <p>点击或拖拽文件到此处上传（支持JPG/PNG格式，最大5MB）</p>
                </label>
                <!-- 原生文件输入框（隐藏） -->
                <input type="file" id="screenshot" name="screenshot" accept="image/jpeg,image/png" onchange="showUploadFile(this)">
                <!-- 显示已上传的文件名 -->
                <p id="uploadFileName" class="text-success"></p>
            </div>

            <!-- 5. 提交按钮 -->
            <div class="submit-btn">
                <button type="submit" class="btn btn-primary">
                    <i class="fa fa-paper-plane"></i> 提交反馈
                </button>
            </div>
        </form>
    </div>
    <script src="../js/app.js"></script>
    <script>
        // 1. 显示已上传的文件名
        function showUploadFile(input) {
            if (input.files && input.files[0]) {
                const fileName = input.files[0].name;
                document.getElementById("uploadFileName").innerText = `已选择文件：${fileName}`;
                
                // 可选：验证文件大小（最大5MB）
                const fileSize = input.files[0].size / 1024 / 1024; // 转MB
                if (fileSize > 5) {
                    alert("文件大小不能超过5MB，请重新选择！");
                    input.value = ""; // 清空选择
                    document.getElementById("uploadFileName").innerText = "";
                }
            }
        }

        // 2. 表单提交验证与处理
        function submitFeedback() {
            // 1. 获取表单数据（可用于后续AJAX提交）
            const feedbackType = document.querySelector('input[name="feedbackType"]:checked').value;
            const comment = document.getElementById("comment").value;
            const pageType = document.querySelector('input[name="pageType"]:checked').value;
            const screenshot = document.getElementById("screenshot").files[0]; // 截图文件

            // 2. 基础验证（虽然加了required，但可额外加自定义验证）
            if (comment.trim().length < 10) { // 限制反馈内容最少10个字
                alert("反馈内容请至少输入10个字，以便我们更好地理解你的需求！");
                document.getElementById("comment").focus(); // 光标定位到输入框
                return false; // 阻止提交
            }

            // 3. 模拟提交（实际项目中替换为AJAX请求）
            alert("反馈提交成功！我们会尽快处理并回复你，感谢支持～");
            
            // 可选：提交后重置表单
            document.getElementById("feedbackForm").reset();
            document.getElementById("uploadFileName").innerText = "";

            // 4. 阻止表单默认提交（避免页面刷新）
            return true;
        }
    </script>
</body>
</html>